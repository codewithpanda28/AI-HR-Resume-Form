<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Employer Dashboard - Resume Portal</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fresumepor2237back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
</head>
<body class="bg-background min-h-screen">
    <!-- Header Navigation -->
    <header class="bg-surface shadow-sm border-b border-border">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <svg class="w-8 h-8 text-primary mr-3" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <h1 class="text-xl font-semibold text-text-primary">Resume Portal</h1>
                </div>
                
                <!-- Navigation Links -->
                <nav class="hidden md:flex space-x-8">
                    <a href="employer_dashboard.html" class="text-primary font-medium">Dashboard</a>
                    <a href="main_submission_form.html" class="text-text-secondary hover:text-primary transition-fast">Application Form</a>
                    <a href="status_tracker_portal.html" class="text-text-secondary hover:text-primary transition-fast">Track Status</a>
                    <a href="help_center.html" class="text-text-secondary hover:text-primary transition-fast">Help Center</a>
                </nav>
                
                <!-- User Profile -->
                <div class="flex items-center space-x-4">
                    <div class="hidden md:flex items-center space-x-2">
                        <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Profile" class="w-8 h-8 rounded-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                        <span class="text-sm text-text-primary">Sarah Chen</span>
                    </div>
                    
                    <!-- Mobile Menu Button -->
                    <button class="md:hidden p-2 rounded-lg hover:bg-secondary-100 transition-fast" onclick="toggleMobileMenu()">
                        <svg class="w-6 h-6 text-text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- Mobile Menu -->
            <div id="mobileMenu" class="hidden md:hidden pb-4">
                <div class="flex flex-col space-y-2">
                    <a href="employer_dashboard.html" class="text-primary font-medium py-2">Dashboard</a>
                    <a href="main_submission_form.html" class="text-text-secondary hover:text-primary transition-fast py-2">Application Form</a>
                    <a href="status_tracker_portal.html" class="text-text-secondary hover:text-primary transition-fast py-2">Track Status</a>
                    <a href="help_center.html" class="text-text-secondary hover:text-primary transition-fast py-2">Help Center</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 py-8 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto">
            <!-- Dashboard Header -->
            <div class="mb-8">
                <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                    <div>
                        <h2 class="text-3xl font-semibold text-text-primary mb-2">Employer Dashboard</h2>
                        <p class="text-text-secondary">Manage and review candidate applications efficiently</p>
                    </div>
                    <div class="mt-4 md:mt-0 flex items-center space-x-3">
                        <span class="text-sm text-text-secondary">Last updated: Sep 4, 2025 at 6:59 AM</span>
                        <button class="btn-secondary" onclick="refreshDashboard()">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                            </svg>
                            Refresh
                        </button>
                    </div>
                </div>
            </div>

            <!-- Metrics Overview -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="card">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-text-secondary mb-1">Total Applications</p>
                            <p class="text-2xl font-semibold text-text-primary">247</p>
                        </div>
                        <div class="bg-primary-100 p-3 rounded-lg">
                            <svg class="w-6 h-6 text-primary" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M16 4v4h4V4h-4zm-2-2h8v8h-8V2zM4 4v4h4V4H4zM2 2h8v8H2V2zm2 14v4h4v-4H4zm-2-2h8v8H2v-8zm14 0v4h4v-4h-4zm-2-2h8v8h-8v-8z"/>
                            </svg>
                        </div>
                    </div>
                    <div class="mt-2 flex items-center text-sm">
                        <span class="text-success-600 font-medium">+12%</span>
                        <span class="text-text-secondary ml-1">from last month</span>
                    </div>
                </div>

                <div class="card">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-text-secondary mb-1">Pending Review</p>
                            <p class="text-2xl font-semibold text-text-primary">18</p>
                        </div>
                        <div class="bg-warning-100 p-3 rounded-lg">
                            <svg class="w-6 h-6 text-warning-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                        </div>
                    </div>
                    <div class="mt-2 flex items-center text-sm">
                        <span class="text-warning-600 font-medium">Requires attention</span>
                    </div>
                </div>

                <div class="card">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-text-secondary mb-1">Interviews Scheduled</p>
                            <p class="text-2xl font-semibold text-text-primary">8</p>
                        </div>
                        <div class="bg-accent-100 p-3 rounded-lg">
                            <svg class="w-6 h-6 text-accent-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                            </svg>
                        </div>
                    </div>
                    <div class="mt-2 flex items-center text-sm">
                        <span class="text-accent-600 font-medium">This week</span>
                    </div>
                </div>

                <div class="card">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-text-secondary mb-1">Hired This Month</p>
                            <p class="text-2xl font-semibold text-text-primary">5</p>
                        </div>
                        <div class="bg-success-100 p-3 rounded-lg">
                            <svg class="w-6 h-6 text-success-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                        </div>
                    </div>
                    <div class="mt-2 flex items-center text-sm">
                        <span class="text-success-600 font-medium">Goal: 8</span>
                    </div>
                </div>
            </div>

            <!-- Filters and Search -->
            <div class="card mb-8">
                <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0">
                    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                        <!-- Search -->
                        <div class="relative">
                            <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-secondary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                            </svg>
                            <input type="text" placeholder="Search candidates..." class="form-input pl-10 w-full sm:w-64" id="searchInput" oninput="filterApplications()" />
                        </div>

                        <!-- Status Filter -->
                        <select class="form-input w-full sm:w-auto" id="statusFilter" onchange="filterApplications()">
                            <option value>All Statuses</option>
                            <option value="new">New</option>
                            <option value="reviewing">Under Review</option>
                            <option value="interview">Interview Scheduled</option>
                            <option value="hired">Hired</option>
                            <option value="rejected">Rejected</option>
                        </select>

                        <!-- Position Filter -->
                        <select class="form-input w-full sm:w-auto" id="positionFilter" onchange="filterApplications()">
                            <option value>All Positions</option>
                            <option value="software-engineer">Software Engineer</option>
                            <option value="product-manager">Product Manager</option>
                            <option value="designer">Designer</option>
                            <option value="data-scientist">Data Scientist</option>
                            <option value="marketing">Marketing</option>
                        </select>
                    </div>

                    <div class="flex space-x-3">
                        <button class="btn-secondary" onclick="resetFilters()">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                            </svg>
                            Reset
                        </button>
                        <button class="btn-primary" onclick="exportData()">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                            Export
                        </button>
                    </div>
                </div>
            </div>

            <!-- Applications Table -->
            <div class="card">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg font-semibold text-text-primary">Recent Applications</h3>
                    <div class="flex items-center space-x-2">
                        <span class="text-sm text-text-secondary">Showing 1-10 of 247</span>
                        <div class="flex space-x-1">
                            <button class="p-2 rounded hover:bg-secondary-100 transition-fast" onclick="previousPage()">
                                <svg class="w-4 h-4 text-secondary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                                </svg>
                            </button>
                            <button class="p-2 rounded hover:bg-secondary-100 transition-fast" onclick="nextPage()">
                                <svg class="w-4 h-4 text-secondary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Desktop Table View -->
                <div class="hidden lg:block overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-border">
                                <th class="text-left py-3 px-4 font-medium text-text-secondary">
                                    <input type="checkbox" class="mr-2" onchange="toggleSelectAll(this)" />
                                    Candidate
                                </th>
                                <th class="text-left py-3 px-4 font-medium text-text-secondary">Position</th>
                                <th class="text-left py-3 px-4 font-medium text-text-secondary">Experience</th>
                                <th class="text-left py-3 px-4 font-medium text-text-secondary">Status</th>
                                <th class="text-left py-3 px-4 font-medium text-text-secondary">Applied</th>
                                <th class="text-left py-3 px-4 font-medium text-text-secondary">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="applicationsTable">
                            <!-- Application rows will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>

                <!-- Mobile Card View -->
                <div class="lg:hidden space-y-4" id="applicationsCards">
                    <!-- Application cards will be populated by JavaScript -->
                </div>
            </div>

            <!-- Bulk Actions Bar (Hidden by default) -->
            <div id="bulkActionsBar" class="hidden fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-surface shadow-modal rounded-lg border border-border p-4">
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-text-secondary" id="selectedCount">0 selected</span>
                    <div class="flex space-x-2">
                        <button class="btn-secondary text-sm py-2 px-4" onclick="bulkAction('review')">Mark as Reviewing</button>
                        <button class="btn-secondary text-sm py-2 px-4" onclick="bulkAction('interview')">Schedule Interview</button>
                        <button class="btn-secondary text-sm py-2 px-4" onclick="bulkAction('reject')">Reject</button>
                    </div>
                    <button class="text-text-secondary hover:text-text-primary" onclick="clearSelection()">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Application Detail Modal -->
    <div id="applicationModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div class="bg-surface rounded-lg shadow-modal max-w-2xl w-full max-h-screen overflow-y-auto">
            <div class="p-6 border-b border-border">
                <div class="flex items-center justify-between">
                    <h3 class="text-lg font-semibold text-text-primary" id="modalTitle">Application Details</h3>
                    <button class="text-text-secondary hover:text-text-primary" onclick="closeModal()">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="p-6" id="modalContent">
                <!-- Modal content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-surface border-t border-border mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center mb-4 md:mb-0">
                    <svg class="w-6 h-6 text-primary mr-2" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <span class="text-text-primary font-medium">Resume Portal</span>
                </div>
                <div class="flex space-x-6 text-sm text-text-secondary">
                    <a href="help_center.html" class="hover:text-primary transition-fast">Help Center</a>
                    <a href="privacy_policy.html" class="hover:text-primary transition-fast">Privacy Policy</a>
                    <a href="main_submission_form.html" class="hover:text-primary transition-fast">Application Form</a>
                </div>
            </div>
            <div class="text-center text-sm text-text-secondary mt-4">
                Â© 2025 Resume Portal. All Rights Reserved.
            </div>
        </div>
    </footer>

    <script>
        // Sample application data
        const applications = [
            {
                id: 1,
                name: "Alex Rodriguez",
                email: "alex.rodriguez@email.com",
                position: "Senior Software Engineer",
                experience: "7-10 years",
                status: "new",
                applied: "2025-09-03",
                phone: "(555) 123-4567",
                location: "San Francisco, CA",
                skills: "JavaScript, React, Node.js, Python, AWS",
                summary: "Experienced full-stack developer with expertise in modern web technologies and cloud platforms."
            },
            {
                id: 2,
                name: "Sarah Kim",
                email: "sarah.kim@email.com",
                position: "Product Manager",
                experience: "4-6 years",
                status: "reviewing",
                applied: "2025-09-02",
                phone: "(555) 234-5678",
                location: "New York, NY",
                skills: "Product Strategy, Agile, Data Analysis, User Research",
                summary: "Strategic product manager with a track record of launching successful digital products."
            },
            {
                id: 3,
                name: "Michael Chen",
                email: "michael.chen@email.com",
                position: "UX Designer",
                experience: "2-3 years",
                status: "interview",
                applied: "2025-09-01",
                phone: "(555) 345-6789",
                location: "Austin, TX",
                skills: "Figma, Sketch, User Research, Prototyping, Design Systems",
                summary: "Creative UX designer passionate about creating intuitive user experiences."
            },
            {
                id: 4,
                name: "Emily Johnson",
                email: "emily.johnson@email.com",
                position: "Data Scientist",
                experience: "4-6 years",
                status: "hired",
                applied: "2025-08-30",
                phone: "(555) 456-7890",
                location: "Seattle, WA",
                skills: "Python, R, Machine Learning, SQL, Tableau",
                summary: "Data scientist with expertise in machine learning and statistical analysis."
            },
            {
                id: 5,
                name: "David Park",
                email: "david.park@email.com",
                position: "Marketing Manager",
                experience: "4-6 years",
                status: "rejected",
                applied: "2025-08-29",
                phone: "(555) 567-8901",
                location: "Los Angeles, CA",
                skills: "Digital Marketing, SEO, Content Strategy, Analytics",
                summary: "Marketing professional with experience in digital campaigns and brand management."
            }
        ];

        let selectedApplications = new Set();
        let currentApplications = [...applications];

        // Mobile menu toggle
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        }

        // Render applications
        function renderApplications() {
            renderDesktopTable();
            renderMobileCards();
        }

        function renderDesktopTable() {
            const tbody = document.getElementById('applicationsTable');
            tbody.innerHTML = '';

            currentApplications.forEach(app => {
                const row = document.createElement('tr');
                row.className = 'border-b border-border hover:bg-secondary-50 transition-fast';
                row.innerHTML = `
                    <td class="py-4 px-4">
                        <div class="flex items-center">
                            <input type="checkbox" class="mr-3" value="${app.id}" onchange="toggleSelection(${app.id}, this.checked)">
                            <div>
                                <p class="font-medium text-text-primary">${app.name}</p>
                                <p class="text-sm text-text-secondary">${app.email}</p>
                            </div>
                        </div>
                    </td>
                    <td class="py-4 px-4 text-text-primary">${app.position}</td>
                    <td class="py-4 px-4 text-text-secondary">${app.experience}</td>
                    <td class="py-4 px-4">
                        <span class="status-badge status-${app.status}">${getStatusText(app.status)}</span>
                    </td>
                    <td class="py-4 px-4 text-text-secondary">${formatDate(app.applied)}</td>
                    <td class="py-4 px-4">
                        <div class="flex space-x-2">
                            <button class="text-primary hover:text-primary-700 text-sm" onclick="viewApplication(${app.id})">View</button>
                            <button class="text-text-secondary hover:text-text-primary text-sm" onclick="updateStatus(${app.id})">Update</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function renderMobileCards() {
            const container = document.getElementById('applicationsCards');
            container.innerHTML = '';

            currentApplications.forEach(app => {
                const card = document.createElement('div');
                card.className = 'bg-surface border border-border rounded-lg p-4';
                card.innerHTML = `
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex items-center">
                            <input type="checkbox" class="mr-3" value="${app.id}" onchange="toggleSelection(${app.id}, this.checked)">
                            <div>
                                <h4 class="font-medium text-text-primary">${app.name}</h4>
                                <p class="text-sm text-text-secondary">${app.email}</p>
                            </div>
                        </div>
                        <span class="status-badge status-${app.status}">${getStatusText(app.status)}</span>
                    </div>
                    <div class="space-y-2 mb-4">
                        <div class="flex justify-between text-sm">
                            <span class="text-text-secondary">Position:</span>
                            <span class="text-text-primary">${app.position}</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-text-secondary">Experience:</span>
                            <span class="text-text-primary">${app.experience}</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-text-secondary">Applied:</span>
                            <span class="text-text-primary">${formatDate(app.applied)}</span>
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        <button class="btn-secondary text-sm py-2 px-4 flex-1" onclick="viewApplication(${app.id})">View Details</button>
                        <button class="btn-primary text-sm py-2 px-4" onclick="updateStatus(${app.id})">Update Status</button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function getStatusText(status) {
            const statusMap = {
                'new': 'New',
                'reviewing': 'Under Review',
                'interview': 'Interview',
                'hired': 'Hired',
                'rejected': 'Rejected'
            };
            return statusMap[status] || status;
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                month: 'short', 
                day: 'numeric', 
                year: 'numeric' 
            });
        }

        // Filter applications
        function filterApplications() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const positionFilter = document.getElementById('positionFilter').value;

            currentApplications = applications.filter(app => {
                const matchesSearch = app.name.toLowerCase().includes(searchTerm) || 
                                    app.email.toLowerCase().includes(searchTerm) ||
                                    app.position.toLowerCase().includes(searchTerm);
                const matchesStatus = !statusFilter || app.status === statusFilter;
                const matchesPosition = !positionFilter || app.position.toLowerCase().includes(positionFilter.replace('-', ' '));

                return matchesSearch && matchesStatus && matchesPosition;
            });

            renderApplications();
        }

        function resetFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('statusFilter').value = '';
            document.getElementById('positionFilter').value = '';
            currentApplications = [...applications];
            renderApplications();
        }

        // Selection management
        function toggleSelection(appId, checked) {
            if (checked) {
                selectedApplications.add(appId);
            } else {
                selectedApplications.delete(appId);
            }
            updateBulkActionsBar();
        }

        function toggleSelectAll(checkbox) {
            const checkboxes = document.querySelectorAll('input[type="checkbox"][value]');
            checkboxes.forEach(cb => {
                cb.checked = checkbox.checked;
                toggleSelection(parseInt(cb.value), checkbox.checked);
            });
        }

        function updateBulkActionsBar() {
            const bar = document.getElementById('bulkActionsBar');
            const count = document.getElementById('selectedCount');
            
            if (selectedApplications.size > 0) {
                bar.classList.remove('hidden');
                count.textContent = `${selectedApplications.size} selected`;
            } else {
                bar.classList.add('hidden');
            }
        }

        function clearSelection() {
            selectedApplications.clear();
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            updateBulkActionsBar();
        }

        // Application actions
        function viewApplication(appId) {
            const app = applications.find(a => a.id === appId);
            if (!app) return;

            document.getElementById('modalTitle').textContent = `${app.name} - Application Details`;
            document.getElementById('modalContent').innerHTML = `
                <div class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-medium text-text-primary mb-3">Contact Information</h4>
                            <div class="space-y-2 text-sm">
                                <div><span class="text-text-secondary">Name:</span> <span class="text-text-primary">${app.name}</span></div>
                                <div><span class="text-text-secondary">Email:</span> <span class="text-text-primary">${app.email}</span></div>
                                <div><span class="text-text-secondary">Phone:</span> <span class="text-text-primary">${app.phone}</span></div>
                                <div><span class="text-text-secondary">Location:</span> <span class="text-text-primary">${app.location}</span></div>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-medium text-text-primary mb-3">Application Details</h4>
                            <div class="space-y-2 text-sm">
                                <div><span class="text-text-secondary">Position:</span> <span class="text-text-primary">${app.position}</span></div>
                                <div><span class="text-text-secondary">Experience:</span> <span class="text-text-primary">${app.experience}</span></div>
                                <div><span class="text-text-secondary">Status:</span> <span class="status-badge status-${app.status}">${getStatusText(app.status)}</span></div>
                                <div><span class="text-text-secondary">Applied:</span> <span class="text-text-primary">${formatDate(app.applied)}</span></div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-medium text-text-primary mb-3">Skills</h4>
                        <p class="text-text-secondary text-sm">${app.skills}</p>
                    </div>
                    <div>
                        <h4 class="font-medium text-text-primary mb-3">Professional Summary</h4>
                        <p class="text-text-secondary text-sm">${app.summary}</p>
                    </div>
                    <div class="flex space-x-3 pt-4 border-t border-border">
                        <button class="btn-primary" onclick="downloadResume(${app.id})">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                            Download Resume
                        </button>
                        <button class="btn-secondary" onclick="scheduleInterview(${app.id})">Schedule Interview</button>
                        <button class="btn-secondary" onclick="sendEmail(${app.id})">Send Email</button>
                    </div>
                </div>
            `;
            document.getElementById('applicationModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('applicationModal').classList.add('hidden');
        }

        function updateStatus(appId) {
            const newStatus = prompt('Enter new status (new, reviewing, interview, hired, rejected):');
            if (newStatus && ['new', 'reviewing', 'interview', 'hired', 'rejected'].includes(newStatus)) {
                const app = applications.find(a => a.id === appId);
                if (app) {
                    app.status = newStatus;
                    renderApplications();
                }
            }
        }

        function bulkAction(action) {
            if (selectedApplications.size === 0) return;
            
            const message = `Are you sure you want to ${action} ${selectedApplications.size} application(s)?`;
            if (confirm(message)) {
                selectedApplications.forEach(appId => {
                    const app = applications.find(a => a.id === appId);
                    if (app) {
                        if (action === 'review') app.status = 'reviewing';
                        else if (action === 'interview') app.status = 'interview';
                        else if (action === 'reject') app.status = 'rejected';
                    }
                });
                clearSelection();
                renderApplications();
            }
        }

        // Utility functions
        function refreshDashboard() {
            location.reload();
        }

        function exportData() {
            alert('Export functionality would be implemented here');
        }

        function previousPage() {
            alert('Previous page functionality would be implemented here');
        }

        function nextPage() {
            alert('Next page functionality would be implemented here');
        }

        function downloadResume(appId) {
            alert('Resume download functionality would be implemented here');
        }

        function scheduleInterview(appId) {
            alert('Interview scheduling functionality would be implemented here');
        }

        function sendEmail(appId) {
            alert('Email functionality would be implemented here');
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            renderApplications();
            
            // Add status badge styles
            const style = document.createElement('style');
            style.textContent = `
                .status-badge {
                    padding: 4px 8px;
                    border-radius: 4px;
                    font-size: 12px;
                    font-weight: 500;
                }
                .status-new {
                    background-color: var(--color-secondary-100);
                    color: var(--color-secondary-600);
                }
                .status-reviewing {
                    background-color: var(--color-warning-100);
                    color: var(--color-warning-600);
                }
                .status-interview {
                    background-color: var(--color-accent-100);
                    color: var(--color-accent-600);
                }
                .status-hired {
                    background-color: var(--color-success-100);
                    color: var(--color-success-600);
                }
                .status-rejected {
                    background-color: var(--color-error-100);
                    color: var(--color-error-600);
                }
            `;
            document.head.appendChild(style);
        });
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>