<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Submit Your Application - Resume Portal</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fresumepor2237back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
</head>
<body class="bg-background min-h-screen">
    <!-- Header Navigation -->
    <header class="bg-surface shadow-sm border-b border-border">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <svg class="w-8 h-8 text-primary mr-3" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <h1 class="text-xl font-semibold text-text-primary">Resume Portal</h1>
                </div>
                
                <!-- Navigation Links -->
                <nav class="hidden md:flex space-x-8">
                    <a href="main_submission_form.html" class="text-primary font-medium">Submit Application</a>
                    <a href="status_tracker_portal.html" class="text-text-secondary hover:text-primary transition-fast">Track Status</a>
                    <a href="help_center.html" class="text-text-secondary hover:text-primary transition-fast">Help Center</a>
                    <a href="employer_dashboard.html" class="text-text-secondary hover:text-primary transition-fast">Employers</a>
                </nav>
                
                <!-- Mobile Menu Button -->
                <button class="md:hidden p-2 rounded-lg hover:bg-secondary-100 transition-fast" onclick="toggleMobileMenu()">
                    <svg class="w-6 h-6 text-text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>
            
            <!-- Mobile Menu -->
            <div id="mobileMenu" class="hidden md:hidden pb-4">
                <div class="flex flex-col space-y-2">
                    <a href="main_submission_form.html" class="text-primary font-medium py-2">Submit Application</a>
                    <a href="status_tracker_portal.html" class="text-text-secondary hover:text-primary transition-fast py-2">Track Status</a>
                    <a href="help_center.html" class="text-text-secondary hover:text-primary transition-fast py-2">Help Center</a>
                    <a href="employer_dashboard.html" class="text-text-secondary hover:text-primary transition-fast py-2">Employers</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 py-8 px-4 sm:px-6 lg:px-8">
        <div class="max-w-2xl mx-auto">
            <!-- Form Header -->
            <div class="text-center mb-8">
                <h2 class="text-3xl font-semibold text-text-primary mb-4">Submit Your Application</h2>
                <p class="text-text-secondary text-lg">Join our talent network with a streamlined application process designed to showcase your potential.</p>
            </div>

            <!-- Progress Indicator -->
            <div class="mb-8">
                <div class="flex items-center justify-between text-sm text-text-secondary mb-2">
                    <span>Application Progress</span>
                    <span id="progressText">0% Complete</span>
                </div>
                <div class="w-full bg-secondary-200 rounded-full h-2">
                    <div id="progressBar" class="bg-primary h-2 rounded-full transition-all duration-500 ease-out" style="width: 0%"></div>
                </div>
            </div>

            <!-- Application Form -->
            <form id="applicationForm" class="card space-y-8" onsubmit="handleSubmit(event)">
                <!-- Personal Information Section -->
                <section id="personalInfo">
                    <h3 class="text-xl font-medium text-text-primary mb-6 flex items-center">
                        <svg class="w-5 h-5 text-primary mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                        </svg>
                        Personal Information
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="firstName" class="form-label">First Name *</label>
                            <input type="text" id="firstName" name="firstName" class="form-input" required placeholder="Enter your first name" onblur="validateField(this)" oninput="updateProgress()" />
                            <div class="validation-message hidden mt-1 text-sm"></div>
                        </div>
                        
                        <div>
                            <label for="lastName" class="form-label">Last Name *</label>
                            <input type="text" id="lastName" name="lastName" class="form-input" required placeholder="Enter your last name" onblur="validateField(this)" oninput="updateProgress()" />
                            <div class="validation-message hidden mt-1 text-sm"></div>
                        </div>
                        
                        <div>
                            <label for="email" class="form-label">Email Address *</label>
                            <input type="email" id="email" name="email" class="form-input" required placeholder="your.email@example.com" onblur="validateField(this)" oninput="updateProgress()" />
                            <div class="validation-message hidden mt-1 text-sm"></div>
                        </div>
                        
                        <div>
                            <label for="phone" class="form-label">Phone Number *</label>
                            <input type="tel" id="phone" name="phone" class="form-input" required placeholder="(555) 123-4567" onblur="validateField(this)" oninput="updateProgress()" />
                            <div class="validation-message hidden mt-1 text-sm"></div>
                        </div>
                        
                        <div class="md:col-span-2">
                            <label for="location" class="form-label">Location (City, State) *</label>
                            <input type="text" id="location" name="location" class="form-input" required placeholder="New York, NY" onblur="validateField(this)" oninput="updateProgress()" />
                            <div class="validation-message hidden mt-1 text-sm"></div>
                        </div>
                    </div>
                </section>

                <!-- Professional Summary Section -->
                <section id="professionalSummary">
                    <h3 class="text-xl font-medium text-text-primary mb-6 flex items-center">
                        <svg class="w-5 h-5 text-primary mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20 6L9 17l-5-5"/>
                        </svg>
                        Professional Summary
                    </h3>
                    
                    <div class="space-y-6">
                        <div>
                            <label for="jobTitle" class="form-label">Current/Desired Job Title *</label>
                            <input type="text" id="jobTitle" name="jobTitle" class="form-input" required placeholder="e.g., Senior Software Engineer" onblur="validateField(this)" oninput="updateProgress()" />
                            <div class="validation-message hidden mt-1 text-sm"></div>
                        </div>
                        
                        <div>
                            <label for="experience" class="form-label">Years of Experience *</label>
                            <select id="experience" name="experience" class="form-input" required onchange="validateField(this); updateProgress()">
                                <option value>Select experience level</option>
                                <option value="0-1">0-1 years (Entry Level)</option>
                                <option value="2-3">2-3 years</option>
                                <option value="4-6">4-6 years</option>
                                <option value="7-10">7-10 years</option>
                                <option value="10+">10+ years (Senior Level)</option>
                            </select>
                            <div class="validation-message hidden mt-1 text-sm"></div>
                        </div>
                        
                        <div>
                            <label for="skills" class="form-label">Key Skills (comma-separated) *</label>
                            <textarea id="skills" name="skills" rows="3" class="form-input" required placeholder="JavaScript, React, Node.js, Python, Project Management..." onblur="validateField(this)" oninput="updateProgress()"></textarea>
                            <div class="validation-message hidden mt-1 text-sm"></div>
                        </div>
                        
                        <div>
                            <label for="summary" class="form-label">Professional Summary</label>
                            <textarea id="summary" name="summary" rows="4" class="form-input" placeholder="Brief overview of your professional background and career objectives..." onblur="validateField(this)" oninput="updateProgress()"></textarea>
                            <div class="validation-message hidden mt-1 text-sm"></div>
                        </div>
                    </div>
                </section>

                <!-- Resume Upload Section -->
                <section id="resumeUpload">
                    <h3 class="text-xl font-medium text-text-primary mb-6 flex items-center">
                        <svg class="w-5 h-5 text-primary mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                        </svg>
                        Resume Upload
                    </h3>
                    
                    <div class="space-y-6">
                        <!-- File Upload Area -->
                        <div class="border-2 border-dashed border-secondary-300 rounded-lg p-8 text-center hover:border-primary transition-fast" id="dropZone" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                            <svg class="w-12 h-12 text-secondary-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                            </svg>
                            <h4 class="text-lg font-medium text-text-primary mb-2">Upload your resume</h4>
                            <p class="text-text-secondary mb-4">Drag and drop your file here, or click to browse</p>
                            <input type="file" id="resumeFile" name="resumeFile" class="hidden" accept=".pdf,.doc,.docx" onchange="handleFileSelect(event)" />
                            <button type="button" class="btn-secondary" onclick="document.getElementById('resumeFile').click()">
                                Choose File
                            </button>
                            <p class="text-sm text-text-secondary mt-2">Supported formats: PDF, DOC, DOCX (Max 5MB)</p>
                        </div>
                        
                        <!-- File Preview -->
                        <div id="filePreview" class="hidden bg-success-100 border border-success-500 rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <svg class="w-8 h-8 text-success-600 mr-3" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                                    </svg>
                                    <div>
                                        <p id="fileName" class="font-medium text-success-600"></p>
                                        <p id="fileSize" class="text-sm text-success-600"></p>
                                    </div>
                                </div>
                                <button type="button" class="text-success-600 hover:text-success-700" onclick="removeFile()">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Alternative LinkedIn Option -->
                        <div class="text-center">
                            <p class="text-text-secondary mb-4">Or provide your LinkedIn profile URL</p>
                            <div>
                                <label for="linkedinUrl" class="form-label">LinkedIn Profile URL</label>
                                <input type="url" id="linkedinUrl" name="linkedinUrl" class="form-input" placeholder="https://linkedin.com/in/your-profile" onblur="validateField(this)" oninput="updateProgress()" />
                                <div class="validation-message hidden mt-1 text-sm"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Preferences Section -->
                <section id="preferences">
                    <h3 class="text-xl font-medium text-text-primary mb-6 flex items-center">
                        <svg class="w-5 h-5 text-primary mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
                        </svg>
                        Application Preferences
                    </h3>
                    
                    <div class="space-y-6">
                        <div>
                            <label for="jobType" class="form-label">Preferred Job Type</label>
                            <select id="jobType" name="jobType" class="form-input" onchange="updateProgress()">
                                <option value>Select job type</option>
                                <option value="full-time">Full-time</option>
                                <option value="part-time">Part-time</option>
                                <option value="contract">Contract</option>
                                <option value="freelance">Freelance</option>
                                <option value="internship">Internship</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="salaryRange" class="form-label">Expected Salary Range</label>
                            <select id="salaryRange" name="salaryRange" class="form-input" onchange="updateProgress()">
                                <option value>Select salary range</option>
                                <option value="30-50k">$30,000 - $50,000</option>
                                <option value="50-75k">$50,000 - $75,000</option>
                                <option value="75-100k">$75,000 - $100,000</option>
                                <option value="100-150k">$100,000 - $150,000</option>
                                <option value="150k+">$150,000+</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="form-label">Communication Preferences</label>
                            <div class="space-y-3 mt-2">
                                <label class="flex items-center">
                                    <input type="checkbox" name="notifications[]" value="email" class="mr-3 h-4 w-4 text-primary border-border rounded focus:ring-primary" onchange="updateProgress()" />
                                    <span class="text-text-primary">Email updates about my application</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="notifications[]" value="sms" class="mr-3 h-4 w-4 text-primary border-border rounded focus:ring-primary" onchange="updateProgress()" />
                                    <span class="text-text-primary">SMS notifications for important updates</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="notifications[]" value="newsletter" class="mr-3 h-4 w-4 text-primary border-border rounded focus:ring-primary" onchange="updateProgress()" />
                                    <span class="text-text-primary">Job alerts and career opportunities</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Trust Signals -->
                <div class="bg-secondary-100 rounded-lg p-6">
                    <div class="flex items-center justify-center space-x-6">
                        <div class="flex items-center text-success-600">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z"/>
                            </svg>
                            <span class="text-sm font-medium">SSL Secured</span>
                        </div>
                        <div class="flex items-center text-text-secondary">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M11,7H13V9H11V7M11,11H13V17H11V11Z"/>
                            </svg>
                            <a href="privacy_policy.html" class="text-sm hover:text-primary transition-fast">Privacy Protected</a>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="text-center pt-6">
                    <button type="submit" class="btn-primary w-full md:w-auto px-12 py-4 text-lg" id="submitBtn">
                        <span class="flex items-center justify-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M2,21L23,12L2,3V10L17,12L2,14V21Z"/>
                            </svg>
                            Submit Application
                        </span>
                    </button>
                    <p class="text-sm text-text-secondary mt-4">
                        By submitting, you agree to our 
                        <a href="privacy_policy.html" class="text-primary hover:underline">Privacy Policy</a>
                    </p>
                </div>
            </form>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-surface border-t border-border mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center mb-4 md:mb-0">
                    <svg class="w-6 h-6 text-primary mr-2" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <span class="text-text-primary font-medium">Resume Portal</span>
                </div>
                <div class="flex space-x-6 text-sm text-text-secondary">
                    <a href="help_center.html" class="hover:text-primary transition-fast">Help Center</a>
                    <a href="privacy_policy.html" class="hover:text-primary transition-fast">Privacy Policy</a>
                    <a href="status_tracker_portal.html" class="hover:text-primary transition-fast">Track Application</a>
                </div>
            </div>
            <div class="text-center text-sm text-text-secondary mt-4">
                © 2025 Resume Portal. All Rights Reserved.
            </div>
        </div>
    </footer>

    <script>
    // Mobile menu toggle
    function toggleMobileMenu() {
        const menu = document.getElementById('mobileMenu');
        menu.classList.toggle('hidden');
    }

    // Form validation
    function validateField(field) {
        const messageDiv = field.parentNode.querySelector('.validation-message');
        let isValid = true;
        let message = '';

        // Remove existing validation classes
        field.classList.remove('border-success-500', 'border-error-500');
        messageDiv.classList.add('hidden');

        if (field.hasAttribute('required') && !field.value.trim()) {
            isValid = false;
            message = 'This field is required';
        } else if (field.type === 'email' && field.value) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(field.value)) {
                isValid = false;
                message = 'Please enter a valid email address';
            }
        } else if (field.type === 'tel' && field.value) {
            const phoneRegex = /^[\+]?[1-9][\d]{0,15}$/;
            if (!phoneRegex.test(field.value.replace(/\D/g, ''))) {
                isValid = false;
                message = 'Please enter a valid phone number';
            }
        } else if (field.type === 'url' && field.value) {
            try {
                new URL(field.value);
            } catch {
                isValid = false;
                message = 'Please enter a valid URL';
            }
        }

        if (isValid && field.value.trim()) {
            field.classList.add('border-success-500');
            messageDiv.textContent = '✓ Valid';
            messageDiv.className = 'validation-message text-success-600 mt-1 text-sm';
            messageDiv.classList.remove('hidden');
        } else if (!isValid) {
            field.classList.add('border-error-500');
            messageDiv.textContent = message;
            messageDiv.className = 'validation-message text-error-600 mt-1 text-sm';
            messageDiv.classList.remove('hidden');
        }

        return isValid;
    }

    // Progress tracking
    function updateProgress() {
        const form = document.getElementById('applicationForm');
        const requiredFields = form.querySelectorAll('[required]');
        const filledFields = Array.from(requiredFields).filter(field => {
            if (field.type === 'checkbox') {
                return field.checked;
            }
            return field.value.trim() !== '';
        });

        // Add file upload or LinkedIn URL to progress
        const resumeFile = document.getElementById('resumeFile').files.length > 0;
        const linkedinUrl = document.getElementById('linkedinUrl').value.trim() !== '';
        const hasResume = resumeFile || linkedinUrl;

        const totalRequired = requiredFields.length + (hasResume ? 1 : 0);
        const completedRequired = filledFields.length + (hasResume ? 1 : 0);
        
        const progress = Math.round((completedRequired / totalRequired) * 100);
        
        document.getElementById('progressBar').style.width = progress + '%';
        document.getElementById('progressText').textContent = progress + '% Complete';
    }

    // File handling
    function handleDragOver(e) {
        e.preventDefault();
        e.currentTarget.classList.add('border-primary', 'bg-primary-50');
    }

    function handleDragLeave(e) {
        e.currentTarget.classList.remove('border-primary', 'bg-primary-50');
    }

    function handleDrop(e) {
        e.preventDefault();
        e.currentTarget.classList.remove('border-primary', 'bg-primary-50');
        
        const files = e.dataTransfer.files;
        if (files.length > 0) {
            handleFile(files[0]);
        }
    }

    function handleFileSelect(e) {
        const file = e.target.files[0];
        if (file) {
            handleFile(file);
        }
    }

    function handleFile(file) {
        // Validate file type
        const allowedTypes = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
        if (!allowedTypes.includes(file.type)) {
            alert('Please upload a PDF, DOC, or DOCX file.');
            return;
        }

        // Validate file size (5MB)
        if (file.size > 5 * 1024 * 1024) {
            alert('File size must be less than 5MB.');
            return;
        }

        // Show file preview
        document.getElementById('fileName').textContent = file.name;
        document.getElementById('fileSize').textContent = formatFileSize(file.size);
        document.getElementById('filePreview').classList.remove('hidden');
        
        updateProgress();
    }

    function removeFile() {
        document.getElementById('resumeFile').value = '';
        document.getElementById('filePreview').classList.add('hidden');
        updateProgress();
    }

    function formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    // Form submission with webhook integration
    async function handleSubmit(e) {
        e.preventDefault();
        
        // Validate all required fields
        const form = e.target;
        const requiredFields = form.querySelectorAll('[required]');
        let isFormValid = true;

        requiredFields.forEach(field => {
            if (!validateField(field)) {
                isFormValid = false;
            }
        });

        // Check if resume is provided
        const resumeFile = document.getElementById('resumeFile').files.length > 0;
        const linkedinUrl = document.getElementById('linkedinUrl').value.trim() !== '';
        
        if (!resumeFile && !linkedinUrl) {
            alert('Please upload a resume file or provide your LinkedIn profile URL.');
            isFormValid = false;
        }

        if (isFormValid) {
            // Show loading state
            const submitBtn = document.getElementById('submitBtn');
            const originalContent = submitBtn.innerHTML;
            submitBtn.disabled = true;
            submitBtn.innerHTML = `
                <span class="flex items-center justify-center">
                    <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    Submitting...
                </span>
            `;

            try {
                // Prepare form data
                const formData = new FormData();
                
                // Add form fields
                const formElements = form.elements;
                for (let i = 0; i < formElements.length; i++) {
                    const element = formElements[i];
                    
                    if (element.type === 'checkbox') {
                        if (element.checked) {
                            formData.append(element.name, element.value);
                        }
                    } else if (element.type === 'file') {
                        if (element.files.length > 0) {
                            formData.append(element.name, element.files[0]);
                        }
                    } else if (element.name && element.value) {
                        formData.append(element.name, element.value);
                    }
                }

                // Add submission timestamp
                formData.append('submissionDate', new Date().toISOString());
                formData.append('userAgent', navigator.userAgent);

                // Submit to webhook
                const webhookUrl = 'https://test950894.app.n8n.cloud/webhook-test/resume-upload';
                
                const response = await fetch(webhookUrl, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                });

                if (response.ok) {
                    // Success - redirect to confirmation page
                    window.location.href = 'confirmation_page.html';
                } else {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

            } catch (error) {
                console.error('Form submission error:', error);
                
                // Reset button state
                submitBtn.disabled = false;
                submitBtn.innerHTML = originalContent;
                
                // Show error message
                alert('There was an error submitting your application. Please try again or contact support if the problem persists.');
            }
        }
    }

    // Initialize progress on page load
    document.addEventListener('DOMContentLoaded', function() {
        updateProgress();
    });
</script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>